## Auth

**Реализация аутентификации на клиенте**

Аутентификация в проекте осуществляется через код подтверждения, высылаемый на электронную почту. Пользователь отправляет код подтверждения и получает JWT: Access и Refresh токены. Сохранение токенов в cookies происходит на клиенте. Таким образом, в приложении реализуется клиент-серверная аутентификация. На приватных маршрутах с помощью middleware происходит проверка на наличие токенов. Если они отсутствуют - пользователь будет перенаправлен на главную страницу. Это никак не повышает защиту, только делает роутинг более управляемым и интутивным с точки зрения UX. За защиту уже отвечает клиетский код. Механизм проверки и ротации токенов реализован с помощью axios перехватчиков.

Оба токена хранятся в куках, потому что приложение реализуется на базе Next.js, где есть возможность совершать определенные действия на серверной части. В идеале, при реализации SPA-приложения следует сохранить токены в куках, и также завести состояние в приложении о наличии Access токена. Тогда появляется возможность рендерить разные группы маршрутов и выкидывать пользователя из системы, сбрасывая созданное состояние.

Почему Refresh Token не хранится в httpOnly куке? Это можно реализовать для повышения безопаности, но по большей части в этом нет смысла. Если вредоносный код встроится во фронтенд, то ничего не помешает ему делать такие же запросы с той самой кукой, которую пытаются защитить. К тому же в определенных реализациях серверной логики могут быть проблемы при репликации бекенд-части.
